<!DOCTYPE html>
<html lang="en">
<head>
  <base target="_self">
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Talk2DB - Query History</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>

  <style>
    .code-dark { background:#0f172a; color:#86efac; }   /* slate-900 + green-300 */
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .card { border:1px solid #e5e7eb; border-radius:0.75rem; background:#fff; }
    .chip { font-size:.75rem; padding:.15rem .5rem; border-radius:9999px; background:#eef2ff; color:#3730a3; }
  </style>
</head>

<body class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100">
  <!-- Header -->
  <header class="bg-white shadow">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <i class="fas fa-history text-primary text-xl"></i>
        <h1 class="text-xl font-semibold">Query History</h1>
        <span id="countChip" class="chip hidden"></span>
      </div>

      <div class="flex items-center gap-2">
        <button id="btnExportHistory"
                class="px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
          <i class="fas fa-file-export mr-2"></i>Export CSV
        </button>
        <button id="btnClearMemory"
                class="px-3 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50">
          <i class="fas fa-trash mr-2"></i>Clear Memory
        </button>
        <a href="/" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-indigo-700">
          <i class="fas fa-arrow-left mr-2"></i>Back
        </a>
      </div>
    </div>
  </header>

  <!-- Body -->
  <main class="container mx-auto px-4 py-6">
    <!-- Filters (optional simple search) -->
    <div class="mb-4">
      <input id="searchBox" type="text" placeholder="Search in queries or SQLâ€¦"
             class="w-full md:w-96 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400">
    </div>

    <!-- List -->
    <div id="historyList" class="space-y-4">
      <!-- Cards inserted by JS -->
    </div>

    <!-- Empty state -->
    <div id="emptyState" class="hidden text-gray-500 flex flex-col items-center py-16">
      <i class="fas fa-inbox text-4xl mb-3"></i>
      <p>No history for this session.</p>
    </div>
  </main>

  <script defer src="{{ url_for('static', filename='history.js') }}"></script>
</body>
</html>
